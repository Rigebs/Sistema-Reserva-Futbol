<div *ngIf="companyRegistered" class="confirmation-message">
  <h2>¡Compañía registrada correctamente!</h2>
  <p>
    Te enviaremos un link de confirmación para que actives tu cuenta de compañía
    y puedas ofrecer tus campos.
  </p>
  <button mat-button (click)="goToHome()">Ir a Home</button>
</div>
<div *ngIf="!companyRegistered" class="container">
  <div class="stepper">
    <mat-stepper [orientation]="orientation" [linear]="true">
      <!-- Paso 1: Registrar Empresa -->
      <mat-step
        [stepControl]="empresaFormGroup"
        [completed]="empresaFormGroup.valid"
      >
        <form [formGroup]="empresaFormGroup" novalidate>
          <ng-template matStepLabel>Registrar Empresa</ng-template>

          <div class="grid-container">
            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>RUC</mat-label>
              <input matInput formControlName="ruc" required />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Razón Social</mat-label>
              <input matInput formControlName="razonSocial" readonly />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Teléfono</mat-label>
              <input matInput formControlName="telefono" required />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Dirección</mat-label>
              <input matInput formControlName="direccion" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Departamento</mat-label>
              <mat-select
                formControlName="departamento"
                (selectionChange)="onDepartamentoChange()"
              >
                <mat-option
                  *ngFor="let dept of departamentos"
                  [value]="dept.id"
                >
                  {{ dept.nombre }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Provincia</mat-label>
              <mat-select
                formControlName="provincia"
                (selectionChange)="onProvinciaChange()"
              >
                <mat-option
                  *ngFor="let prov of filteredProvincias"
                  [value]="prov.id"
                >
                  {{ prov.nombre }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Distrito</mat-label>
              <mat-select formControlName="distrito">
                <mat-option
                  *ngFor="let dist of filteredDistritos"
                  [value]="dist.id"
                >
                  {{ dist.nombre }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="button-container">
            <button
              mat-button
              matStepperNext
              [disabled]="!empresaFormGroup.valid"
            >
              Siguiente
            </button>
          </div>
        </form>
      </mat-step>

      <!-- Paso 2: Registrar Compañía -->
      <mat-step
        [stepControl]="companiaFormGroup"
        [completed]="companiaFormGroup.valid"
      >
        <form [formGroup]="companiaFormGroup" novalidate>
          <ng-template matStepLabel>Registrar Compañía</ng-template>

          <div class="grid-container">
            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Nombre de la Compañía</mat-label>
              <input matInput formControlName="nombre" required />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Concepto</mat-label>
              <input matInput formControlName="concepto" required />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Correo Electrónico</mat-label>
              <input matInput formControlName="correo" required type="email" />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Teléfono</mat-label>
              <input matInput formControlName="telefono" required type="tel" />
            </mat-form-field>

            <!-- Apartado para Foto de la Sede -->
            <div class="grid-item">
              <label>Foto de la Sede</label>
              <input
                type="file"
                (change)="onFileSelected($event, 'imagenSede')"
              />
            </div>

            <!-- Apartado para QR de Yape -->
            <div class="grid-item">
              <label>QR de Yape</label>
              <input
                type="file"
                (change)="onFileSelected($event, 'imagenQrYape')"
              />
            </div>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Hora de Inicio</mat-label>
              <input
                matInput
                formControlName="horaInicio"
                required
                type="time"
              />
            </mat-form-field>

            <mat-form-field class="grid-item" appearance="outline">
              <mat-label>Hora de Fin</mat-label>
              <input matInput formControlName="horaFin" required type="time" />
            </mat-form-field>
          </div>

          <div class="button-container">
            <button mat-button matStepperPrevious>Anterior</button>
            <button
              mat-button
              matStepperNext
              [disabled]="!companiaFormGroup.valid"
              (click)="submitForm()"
            >
              Siguiente
            </button>
          </div>
        </form>
      </mat-step>
    </mat-stepper>
  </div>
  <div class="intro-text">
    <h2>¡Bienvenido a nuestro sistema de registro de sedes!</h2>
    <p>
      Te presentamos Zemply, la plataforma líder para reservas de canchas
      deportivas. Con Zemply, tus clientes podrán reservar de manera rápida y
      sencilla desde sus dispositivos móviles, conectándolos con locales como el
      tuyo. Beneficios de afiliarte a Zemply: Mayor visibilidad: Tu local será
      visto por una amplia audiencia de jugadores locales y visitantes. Aumento
      de reservas: Facilita las reservas en cualquier momento y lugar,
      impulsando tus ingresos. Gestión simplificada: Administra horarios y
      disponibilidad con herramientas intuitivas. Mejor experiencia del cliente:
      Ofrece la conveniencia de reservar en línea, fortaleciendo la lealtad de
      tus clientes. Promoción personalizada: Destaca tus instalaciones y eventos
      especiales para atraer más jugadores. Únete a Zemply hoy y lleva tu
      negocio al siguiente nivel. Contáctanos para comenzar, y juntos haremos de
      tu local el destino preferido para los amantes del deporte.
    </p>
  </div>
</div>
